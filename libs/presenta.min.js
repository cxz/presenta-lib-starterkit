!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Presenta=e()}(this,(function(){"use strict";function t(t,e){void 0===e&&(e={});var o=e.insertAt;if(t&&"undefined"!=typeof document){var n=document.head||document.getElementsByTagName("head")[0],i=document.createElement("style");i.type="text/css","top"===o&&n.firstChild?n.insertBefore(i,n.firstChild):n.appendChild(i),i.styleSheet?i.styleSheet.cssText=t:i.appendChild(document.createTextNode(t))}}t('.presenta *{box-sizing:border-box}.presenta{position:relative;--pw:960;--w:960px;--h:540px;--vp:960;--fz:1;--p:calc(var(--pw)/var(--vp))}:root{--fontHeading:Georgia,"Times New Roman",Times,serif;--fontText:"Trebuchet MS","Lucida Sans Unicode","Lucida Grande","Lucida Sans",Arial,sans-serif}.colorvar__a,:root{--backcolor:#fff;--forecolor:#000;--accentcolor:#444;--otheraccentcolor:#ddd;--overlaycolor:var(--backcolor)}.colorvar__b{--backcolor:#000;--accentcolor:#999}.colorvar__b,.colorvar__c{--forecolor:#fff;--otheraccentcolor:#ccc;--overlaycolor:var(--backcolor)}.colorvar__c{--backcolor:#444;--accentcolor:#fff}.layout__block .blocksContainer{display:block}.layout__block .blocksContainer>div{height:auto}.layout__rows .blocksContainer{display:flex;flex-direction:column}.layout__rows .blocksContainer>div{width:100%}.layout__stack .blocksContainer{position:relative}.layout__stack .blocksContainer>div{position:absolute;top:0;left:0;width:100%;height:100%}');t('@import url("https://fonts.googleapis.com/css2?family=Montserrat:wght@600&family=Roboto+Mono:ital,wght@0,400;0,700;1,400&display=swap");.fontkit__original{--fontHeading:"Roboto Mono",monospace;--fontText:"Montserrat",sans-serif}');t('@import url("https://fonts.googleapis.com/css2?family=Playfair+Display:wght@600&family=Work+Sans&display=swap");.fontkit__vibrant{--fontHeading:"Work Sans",sans-serif;--fontText:"Playfair Display",serif}');t(".scheme__original,.scheme__original.colorvar__a,.scheme__original .colorvar__a{--backcolor:#ebded1;--forecolor:#0a47d1;--accentcolor:#fb4138;--otheraccentcolor:#fff}.scheme__original.colorvar__b,.scheme__original .colorvar__b{--backcolor:#0a47d1;--forecolor:#ebded1;--accentcolor:#fff;--otheraccentcolor:#fb4138}.scheme__original.colorvar__c,.scheme__original .colorvar__c{--backcolor:#fb4138;--forecolor:#fff;--accentcolor:#ebded1;--otheraccentcolor:#0a47d1}");t(".scheme__vibrant,.scheme__vibrant.colorvar__a,.scheme__vibrant .colorvar__a{--backcolor:#ffe600;--forecolor:#000;--accentcolor:#ff6400;--otheraccentcolor:#fff}.scheme__vibrant.colorvar__b,.scheme__vibrant .colorvar__b{--backcolor:#000;--forecolor:#ffe600;--accentcolor:#fff;--otheraccentcolor:#ff6400}.scheme__vibrant.colorvar__c,.scheme__vibrant .colorvar__c{--backcolor:#ff6400;--forecolor:#fff;--accentcolor:#ffe600;--otheraccentcolor:#000}");t(".scheme__polite,.scheme__polite.colorvar__a,.scheme__polite .colorvar__a{--backcolor:#322067;--forecolor:#feb8ba;--accentcolor:#449eaf;--otheraccentcolor:#fff}.scheme__polite.colorvar__b,.scheme__polite .colorvar__b{--backcolor:#feb8ba;--forecolor:#322067;--accentcolor:#fff;--otheraccentcolor:#449eaf}.scheme__polite.colorvar__c,.scheme__polite .colorvar__c{--backcolor:#fff;--forecolor:#322067;--accentcolor:#449eaf;--otheraccentcolor:#feb8ba}");t(".scheme__breeze,.scheme__breeze.colorvar__a,.scheme__breeze .colorvar__a{--backcolor:#a9dbd5;--forecolor:#000;--accentcolor:#fff;--otheraccentcolor:#38999d}.scheme__breeze.colorvar__b,.scheme__breeze .colorvar__b{--backcolor:#000;--forecolor:#a9dbd5;--accentcolor:#fff;--otheraccentcolor:#38999d}.scheme__breeze.colorvar__c,.scheme__breeze .colorvar__c{--backcolor:#fff;--forecolor:#38999d;--accentcolor:#a9dbd5;--otheraccentcolor:#000}");t(".scheme__sunny,.scheme__sunny.colorvar__a,.scheme__sunny .colorvar__a{--backcolor:#f9ffb1;--forecolor:#072020;--accentcolor:#ec4225;--otheraccentcolor:#9eb0bb}.scheme__sunny.colorvar__b,.scheme__sunny .colorvar__b{--backcolor:#072020;--forecolor:#f9ffb1;--accentcolor:#ec4225;--otheraccentcolor:#9eb0bb}.scheme__sunny.colorvar__c,.scheme__sunny .colorvar__c{--backcolor:#ec4225;--forecolor:#f9ffb1;--accentcolor:#9eb0bb;--otheraccentcolor:#072020}");t(".scheme__acid,.scheme__acid.colorvar__a,.scheme__acid .colorvar__a{--backcolor:#000;--forecolor:#fff;--accentcolor:#eeff2e;--otheraccentcolor:#de1318}.scheme__acid.colorvar__b,.scheme__acid .colorvar__b{--backcolor:#eeff2e;--forecolor:#000;--accentcolor:#de1318;--otheraccentcolor:#fff}.scheme__acid.colorvar__c,.scheme__acid .colorvar__c{--backcolor:#de1318;--forecolor:#eeff2e;--accentcolor:#fff;--otheraccentcolor:#000}");t(".scheme__novel,.scheme__novel.colorvar__a,.scheme__novel .colorvar__a{--backcolor:#3b7bc3;--forecolor:#f9fb45;--accentcolor:#fff;--otheraccentcolor:#000}.scheme__novel.colorvar__b,.scheme__novel .colorvar__b{--backcolor:#000;--forecolor:#f9fb45;--accentcolor:#fff;--otheraccentcolor:#3b7bc3}.scheme__novel.colorvar__c,.scheme__novel .colorvar__c{--backcolor:#f9fb45;--forecolor:#000;--accentcolor:#3b7bc3;--otheraccentcolor:#fff}");t(".scheme__doub,.scheme__doub.colorvar__a,.scheme__doub .colorvar__a{--backcolor:#e5ff9d;--forecolor:#1c003f;--accentcolor:#69567c;--otheraccentcolor:#fff}.scheme__doub.colorvar__b,.scheme__doub .colorvar__b{--backcolor:#1c003f;--forecolor:#fff;--accentcolor:#e5ff9d;--otheraccentcolor:#69567c}.scheme__doub.colorvar__c,.scheme__doub .colorvar__c{--backcolor:#69567c;--forecolor:#e5ff9d;--accentcolor:#fff;--otheraccentcolor:#1c003f}");t(".scheme__mayb,.scheme__mayb.colorvar__a,.scheme__mayb .colorvar__a{--backcolor:#d0caa9;--forecolor:#30302f;--accentcolor:#ec4a25;--otheraccentcolor:#fff}.scheme__mayb.colorvar__b,.scheme__mayb .colorvar__b{--backcolor:#30302f;--forecolor:#d0caa9;--accentcolor:#ec4a25;--otheraccentcolor:#fff}.scheme__mayb.colorvar__c,.scheme__mayb .colorvar__c{--backcolor:#ec4a25;--forecolor:#fff;--accentcolor:#d0caa9;--otheraccentcolor:#30302f}");var e="scene_sceneContainer__IgSpB",o="scene_scene__3uvTl",n="scene_wrapper__3yr1k",i="scene_content__1rJf0",r="scene_fcontainer__1E_0g",s="scene_viewport__3uNLS";t(":root{--scenePadding:0}.scene_sceneContainer__IgSpB{width:100%;height:100%;display:flex;align-items:center;justify-content:center;position:relative}.scene_scene__3uvTl{--sw:calc(var(--w)/var(--p)/var(--fz));--sh:calc(var(--h)/var(--p)/var(--fz));--scal:calc(var(--pw)/var(--p)/var(--pw)/var(--fz));width:var(--sw);height:var(--sh);font-family:serif;-webkit-user-select:none;-ms-user-select:none;user-select:none}.scene_wrapper__3yr1k{width:var(--w);height:var(--h);transform:scale(1);transform:scale(var(--scal));transform-origin:top left;overflow:hidden;padding:var(--scenePadding)}.scene_content__1rJf0{width:100%;height:100%;display:flex;flex-direction:column;overflow:hidden}.scene_fcontainer__1E_0g{top:0;left:0;width:100%;height:100%;position:absolute}.scene_viewport__3uNLS{width:100%;height:100%;position:relative;flex:1;overflow:hidden;display:flex;flex-direction:row}.scene_viewport__3uNLS>div{height:100%}");var a={select:t=>"string"==typeof t?document.querySelector(t):t,props:(t,e)=>{const o=e?e+"__":"",n={classes:"",styles:""};if(!t)return n;for(const e in t){const i=t[e]+"";if("."===i.substr(0,1)){const t=i.substr(1);n.classes+=o+e+"__"+t+" "}}for(const e in t){"."===(t[e]+"").substr(0,1)||(n.styles+="--"+o+e+":"+t[e]+";")}return n},div:t=>(new DOMParser).parseFromString(t,"text/html").body.childNodes[0],fit:(t,e,o)=>{const n=getComputedStyle(t),i=+n.width.split("px")[0],r=+n.height.split("px")[0];let s=e.aspect;if(e.adapt){s=i/r}o.style.setProperty("--h",parseInt(960/s)+"px");const a=96e3/i,c=100*(960/s)/r,l=Math.max(a,c);o.style.setProperty("--fz",1/(100/l))},event:(t,e)=>new CustomEvent(t,{bubbles:!0,detail:e})},c="block_block__BWbaZ",l="block_inner__3LS6s",_="block_bdecoration__3KJh-",d="block_fdecoration__12tBw";t(":root{--blockWeight:1;--blockPadding:0;--blockOpacity:1;--blockBlend:unset}.block_block__BWbaZ{background:var(--backcolor);width:100%;height:100%;flex:1;flex:var(--blockWeight);overflow:hidden;position:relative}.block_inner__3LS6s{width:100%;height:100%;padding:var(--blockPadding);opacity:var(--blockOpacity);mix-blend-mode:var(--blockBlend)}.block_bdecoration__3KJh-,.block_fdecoration__12tBw,.block_inner__3LS6s{top:0;left:0;width:100%;height:100%;position:absolute;pointer-events:none}");var p="style_debug__1-XHT";t(".style_debug__1-XHT{width:100%;height:100%;display:flex;align-items:center;justify-content:center}");t(":root{--textsize:1.5rem;--textpadding:1rem;--textalign:center}.textbox__inverted{--textboxpadding:1rem;--textboxbackcolor:var(--forecolor);--textboxradius:0;--textboxborder:0;--textboxshadow:0 0 0 var(--accentcolor);--textboxcolor:var(--backcolor)}.p.textposition__tl .pretext,.p.textposition__topleft .pretext{align-items:flex-start;justify-content:flex-start}.p.textposition__tc .pretext,.p.textposition__topcenter .pretext{align-items:flex-start;justify-content:center}.p.textposition__topright .pretext,.p.textposition__tr .pretext{align-items:flex-start;justify-content:flex-end}.p.textposition__centerleft .pretext,.p.textposition__cl .pretext{align-items:center;justify-content:flex-start}.p.textposition__cc .pretext,.p.textposition__center .pretext{align-items:center;justify-content:center}.p.textposition__centerright .pretext,.p.textposition__cr .pretext{align-items:center;justify-content:flex-end}.p.textposition__bl .pretext,.p.textposition__bottomleft .pretext{align-items:flex-end;justify-content:flex-start}.p.textposition__bc .pretext,.p.textposition__bottomcenter .pretext{align-items:flex-end;justify-content:center}.p.textposition__bottomright .pretext,.p.textposition__br .pretext{align-items:flex-end;justify-content:flex-end}.s.textposition__tl .pretext,.s.textposition__topleft .pretext{align-items:flex-start;justify-content:flex-start}.s.textposition__tc .pretext,.s.textposition__topcenter .pretext{align-items:flex-start;justify-content:center}.s.textposition__topright .pretext,.s.textposition__tr .pretext{align-items:flex-start;justify-content:flex-end}.s.textposition__centerleft .pretext,.s.textposition__cl .pretext{align-items:center;justify-content:flex-start}.s.textposition__cc .pretext,.s.textposition__center .pretext{align-items:center;justify-content:center}.s.textposition__centerright .pretext,.s.textposition__cr .pretext{align-items:center;justify-content:flex-end}.s.textposition__bl .pretext,.s.textposition__bottomleft .pretext{align-items:flex-end;justify-content:flex-start}.s.textposition__bc .pretext,.s.textposition__bottomcenter .pretext{align-items:flex-end;justify-content:center}.s.textposition__bottomright .pretext,.s.textposition__br .pretext{align-items:flex-end;justify-content:flex-end}.b.textposition__tl .pretext,.b.textposition__topleft .pretext{align-items:flex-start;justify-content:flex-start}.b.textposition__tc .pretext,.b.textposition__topcenter .pretext{align-items:flex-start;justify-content:center}.b.textposition__topright .pretext,.b.textposition__tr .pretext{align-items:flex-start;justify-content:flex-end}.b.textposition__centerleft .pretext,.b.textposition__cl .pretext{align-items:center;justify-content:flex-start}.b.textposition__cc .pretext,.b.textposition__center .pretext{align-items:center;justify-content:center}.b.textposition__centerright .pretext,.b.textposition__cr .pretext{align-items:center;justify-content:flex-end}.b.textposition__bl .pretext,.b.textposition__bottomleft .pretext{align-items:flex-end;justify-content:flex-start}.b.textposition__bc .pretext,.b.textposition__bottomcenter .pretext{align-items:flex-end;justify-content:center}.b.textposition__bottomright .pretext,.b.textposition__br .pretext{align-items:flex-end;justify-content:flex-end}");var h={text:"style_text__3T1cl",inner:"style_inner__11UJC",pretext:"style_pretext__cLjqD",textbox:"style_textbox__1Vb-V",itext:"style_itext__jz90o"};t('.style_text__3T1cl{color:var(--forecolor)}.style_inner__11UJC,.style_text__3T1cl{width:100%;height:100%;position:relative}.style_pretext__cLjqD{display:flex;width:100%;height:100%;align-items:center;justify-content:center}.style_textbox__1Vb-V{padding:var(--textboxpadding);text-align:var(--textalign);font-size:var(--textsize);color:var(--textboxcolor);--backmark:var(--accentcolor);--foremark:var(--backcolor);--textaccentcolor:var(--accentcolor);font-family:var(--fontText)}.style_itext__jz90o{border:var(--textboxborder) solid var(--accentcolor);padding:var(--textpadding);border-radius:var(--textboxradius);box-shadow:var(--textboxshadow);background-color:var(--textboxbackcolor)}.style_itext__jz90o img{-o-object-fit:contain;object-fit:contain;height:4em;vertical-align:middle}.style_itext__jz90o mark{background-color:var(--backmark);color:var(--foremark);padding:0 .5rem}.style_itext__jz90o high{color:var(--textaccentcolor)}.style_itext__jz90o bord{border:8px solid var(--backmark);padding:0 .5rem}.style_itext__jz90o a{color:var(--textaccentcolor)}.style_itext__jz90o blockquote{font-size:2em;font-weight:400;font-style:italic}.style_itext__jz90o blockquote,.style_itext__jz90o h1,.style_itext__jz90o h2,.style_itext__jz90o h3,.style_itext__jz90o h4,.style_itext__jz90o h5,.style_itext__jz90o h6,.style_itext__jz90o p,.style_itext__jz90o ul{margin:0}.style_itext__jz90o ol,.style_itext__jz90o ul{font-size:1.5em;line-height:1.1em;text-align:left;margin:0;list-style-type:none;counter-reset:li;padding:.5rem 0}.style_itext__jz90o li{list-style-position:inside;margin-bottom:2px;padding:.25em .25em .25em .8em}.style_itext__jz90o ul li:before{content:"\\2013";display:inline-block;width:.8em;margin-left:-.8em}.style_itext__jz90o ol li:before{counter-increment:li;content:"." counter(li);display:inline-block;width:1.1em;margin-left:-1.3em;margin-right:.2em;text-align:right;direction:rtl}.style_itext__jz90o li p{display:inline}.style_itext__jz90o code,.style_itext__jz90o pre{text-align:left}.style_itext__jz90o h1,.style_itext__jz90o h2,.style_itext__jz90o h3,.style_itext__jz90o h4,.style_itext__jz90o h5,.style_itext__jz90o h6{font-family:var(--fontHeading);padding:.5rem 0}.style_itext__jz90o h1{font-size:2em}.style_itext__jz90o h2{font-size:1.5em}.style_itext__jz90o h3{font-size:1.17em}.style_itext__jz90o h4{font-size:1em}.style_itext__jz90o h5{font-size:.83em}.style_itext__jz90o h6{font-size:.67em}.style_itext__jz90o p{padding:.5rem 0}.style_itext__jz90o hr{border:1px solid var(--forecolor);margin:.5rem 0}.style_itext__jz90o h1:first-child,.style_itext__jz90o h1:last-child,.style_itext__jz90o h2:first-child,.style_itext__jz90o h2:last-child,.style_itext__jz90o h3:first-child,.style_itext__jz90o h3:last-child{padding:0}.style_itext__jz90o table{width:100%}.style_itext__jz90o tr{padding:0}.style_itext__jz90o td,.style_itext__jz90o th{padding:.5rem;border-bottom:1px solid var(--forecolor)}');var f="style_inner__3WOWs",y="style_frame__28PUh",b="style_embed__2Pre2",v="style_loading__1w7wc",x="style_blockmouse__3bXSl",u="style_poster__1TOx3";t(":root{--embedPadding:0;--embedBackcolor:none}.style_inner__3WOWs{padding:var(--embedPadding);position:relative}.style_frame__28PUh{background-color:var(--embedBackcolor);position:relative}.style_embed__2Pre2,.style_frame__28PUh,.style_inner__3WOWs,iframe{width:100%;height:100%}iframe{border:none}.style_loading__1w7wc{display:flex;align-items:center;justify-content:center;color:var(--forecolor);font-family:var(--fontText);background-color:var(--backcolor)}.style_blockmouse__3bXSl,.style_loading__1w7wc,.style_poster__1TOx3{position:absolute;top:0;left:0;width:100%;height:100%}.style_poster__1TOx3{background-color:var(--backcolor)}.style_poster__1TOx3 img{width:100%;height:100%}");var m="style_image__1fZIQ",g="style_inner__3tyMU",k="style_preimg__2ypvx";t(":root{--imagePadding:0;--imageBorder:none;--imageShadow:none}.style_image__1fZIQ,.style_inner__3tyMU{width:100%;height:100%}.style_inner__3tyMU{display:flex}.style_preimg__2ypvx{overflow:hidden;flex:1;padding:var(--imagePadding)}.style_preimg__2ypvx img{width:100%;height:100%;border:var(--imageBorder);box-shadow:var(--imageShadow)}");var w="style_video__1qbdJ";t(":root{--videoSize:cover;--videoPosition:center}.style_video__1qbdJ{width:100%;height:100%;display:flex;align-items:center;justify-content:center}.style_video__1qbdJ video{width:100%;height:100%;-o-object-fit:var(--videoSize);object-fit:var(--videoSize);-o-object-position:var(--videoPosition);object-position:var(--videoPosition)}");var C="style_solid__wiwvr";t(".style_solid__wiwvr{--solidColor:var(--backcolor);width:100%;height:100%;display:flex;align-items:center;justify-content:center;background-color:var(--solidColor)}");const z={debug:function(t,e){const o=a.select(t),n=a.div(`<div class="${p}">\n    <h1>DEBUG <div class="step">0</div></h1> \n  </div>`);this.beforeDestroy=()=>{},this.stepForward=t=>{n.querySelector(".step").innerHTML=t},o.appendChild(n)},text:function(t,e){const o=e.text||"";let n=e.scale||1;const i=a.div(`<div class="c ${h.text}">\n    <div class="${h.inner}">\n      <div class="pretext ${h.pretext}">\n        <div class="${h.textbox}">\n          <div class="textContent ${h.itext} ${h.fadein}">\n            ${o}\n          </div>\n        </div>\n      </div>\n    </div>\n  </div>`);this.beforeDestroy=()=>{},this.stepForward=()=>{console.log("stepForward")},t.appendChild(i);let r=i.querySelectorAll("img");r&&(r=[...r].forEach(t=>{const e=t.getAttribute("alt");if(e){const o=+e;o>0&&(t.style.height=4*o+"em")}}));const s=()=>{i.style.setProperty("--textsize",n+"rem");const t=i.querySelector("."+h.inner).getBoundingClientRect(),e=i.querySelector("."+h.textbox).getBoundingClientRect();if(parseInt(t.width)<parseInt(e.width)||parseInt(t.height)<parseInt(e.height))return n-=.1,s();setTimeout(()=>{i.querySelector("."+h.inner).style.visibility="visible"})};i.querySelector("."+h.inner).style.visibility="hidden",setTimeout(s)},embed:function(t,e,o,n){n.mode;const i="present"===n.mode;let r=null;e.url&&(r=`<iframe src="${e.url}"></iframe>`),e.code&&(r=e.code);const s=(t=>{if(!t)return"";const e=new RegExp('src="(.*)',"gim").exec(t)[1].match(/http(s?):\/\/([\w]+\.){1}([\w]+\.?)+/gim);return e.length>0?e[0]:null})(r),c=`<div class="cover ${v}"><h1>Embed from <mark>${s}</mark></h1></div>`,l="object-fit:"+(e.postersize||"cover")+";",_=e.poster?`<div class="${u}"><img style="${l}" src="${e.poster}" /></div>`:"",d=a.div(`<div class="c ${b}">\n    <div class="${f}">\n        <div class="${y}">${r}</div>\n        ${c}\n        ${_}\n        <div class="${x}"></div>\n    </div>\n  </div>`);if(t.appendChild(d),this.beforeDestroy=()=>{},r&&i){d.querySelector("iframe").addEventListener("load",()=>{d.querySelector("."+v).style.display="none",_&&(d.querySelector("."+u).style.display="none")})}},image:function(t,e){const o=e.size||"cover",n=e.url,i=a.div(`<div class="${m}">\n    <div class="imagesContainer ${g}">\n        ${`<div class="presentablock__image ${k}">\n        <img style="${"object-fit:"+o+";"}" src="${n}" />\n      </div>`}\n    </div>\n  </div>`);this.beforeDestroy=()=>{},this.stepForward=t=>{},t.appendChild(i)},video:function(t,e,o,n){n.mode;const i="present"===n.mode,r=e.poster?"poster="+e.poster:"",s=e.loop?"loop":"",c=e.autoplay&&i?"autoplay":"",l=e.url?"src="+e.url:"",_=a.div(`<div class="${w}">\n    <video ${r} ${l} ${s} ${c}></video>\n  </div>`);let d;this.beforeDestroy=()=>{o.removeEventListener("keyup",h)},this.stepForward=t=>{},t.appendChild(_);let p=e.autoplay;const h=t=>{" "===t.key&&(d||(d=_.querySelector("video")),p?d.pause():d.play(),p=!p,t.stopPropagation(),t.preventDefault())};i&&o.addEventListener("keyup",h)},solid:function(t,e){const o=e.color?`style="background:${e.color};"`:"",n=a.div(`<div ${o} class="${C}"></div>`);this.beforeDestroy=()=>{},this.stepForward=t=>{},t.appendChild(n)}},j=function(t,e,o,n){if(this.type=e.type,this.index=e.index,this.block=null,!this.type)return console.warn("No `type` field found in block "+this.index);let i=0;const r=a.props(e.props),s=a.div(`<div class="block ${c} b b${this.index} ${r.classes}" style="${r.styles}">\n    <div class="backDecoration ${_}"></div>\n    <div class="blockContainer ${l}"></div>\n    <div class="frontDecoration ${d}"></div>\n  </div>`);this.el=s;const p=s.querySelector(".blockContainer");z[this.type]?this.block=new z[this.type](p,e,o,n):console.log(`block "${this.type}" not found`),this.beforeDestroy=()=>{this.block.beforeDestroy&&this.block.beforeDestroy()},this.stepForward=()=>{i++,this.block.stepForward?this.block.stepForward(i):console.warn(`The block "${this.type}" doesn't implement the method "stepForward" but this scene tried to use it`)},this.destroy=()=>{this.block.destroy&&this.block.destroy()},t.appendChild(s)},I={};t(".transition__horizontalSlide .p-scene-enter-transition{transition:transform 1s cubic-bezier(1,0,0,1)}.transition__horizontalSlide .to-right.p-scene-enter-start{transform:translateX(100%)}.transition__horizontalSlide .to-right.p-scene-enter-end{transform:translateX(0)}.transition__horizontalSlide .to-left.p-scene-enter-start{transform:translateX(-100%)}.transition__horizontalSlide .to-left.p-scene-enter-end{transform:translateX(0)}.transition__horizontalSlide .p-scene-leave-transition{transition:transform 1s cubic-bezier(1,0,0,1)}.transition__horizontalSlide .to-right.p-scene-leave-start{transform:translateX(0)}.transition__horizontalSlide .to-right.p-scene-leave-end{transform:translateX(-100%)}.transition__horizontalSlide .to-left.p-scene-leave-start{transform:translateX(0)}.transition__horizontalSlide .to-left.p-scene-leave-end{transform:translateX(100%)}");t(".transition__verticalIn .p-scene-enter-transition{transition:all .75s cubic-bezier(.2,.8,.05,.95)}.transition__verticalIn .p-scene-enter-start{transform:translateY(150%)}.transition__verticalIn .p-scene-enter-end{transform:translateY(0)}.transition__verticalIn .p-scene-leave-transition{transition:all .75s cubic-bezier(.2,.8,.05,.95)}.transition__verticalIn .p-scene-leave-start{transform:scale(1)}.transition__verticalIn .p-scene-leave-end{transform:scale(.5)}");t(".transition__outIn .p-scene-enter-transition{opacity:0}.transition__outIn .p-scene-enter-ended{opacity:1}.transition__outIn .p-scene-enter-transition .textContent>*{transition:opacity 1s ease-out,transform 1s cubic-bezier(.2,.8,.05,.95)}.transition__outIn .p-scene-enter-transition .textContent>:first-child{transition-delay:1.15s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(2){transition-delay:1.3s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(3){transition-delay:1.45s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(4){transition-delay:1.6s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(5){transition-delay:1.75s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(6){transition-delay:1.9s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(7){transition-delay:2.05s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(8){transition-delay:2.2s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(9){transition-delay:2.35s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(10){transition-delay:2.5s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(11){transition-delay:2.65s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(12){transition-delay:2.8s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(13){transition-delay:2.95s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(14){transition-delay:3.1s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(15){transition-delay:3.25s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(16){transition-delay:3.4s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(17){transition-delay:3.55s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(18){transition-delay:3.7s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(19){transition-delay:3.85s}.transition__outIn .p-scene-enter-transition .textContent>:nth-child(20){transition-delay:4s}.transition__outIn .p-scene-enter-transition .blockContainer>div{transition:background-color 1s cubic-bezier(1,0,0,1);transition-delay:1s}.transition__outIn .p-scene-enter-start .blockContainer>div{background-color:transparent}.transition__outIn .p-scene-enter-start .textContent>*{opacity:0;transform:translateY(30px)}.transition__outIn .p-scene-enter-end .textContent>*{opacity:1;transform:translateY(0)}.transition__outIn .p-scene-leave-transition .textContent>*{transition:opacity .75s cubic-bezier(.165,.84,.44,1),transform .75s cubic-bezier(.165,.84,.44,1)}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(0){transition-delay:0s}.transition__outIn .p-scene-leave-transition .textContent>:first-child{transition-delay:.1s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(2){transition-delay:.2s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(3){transition-delay:.3s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(4){transition-delay:.4s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(5){transition-delay:.5s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(6){transition-delay:.6s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(7){transition-delay:.7s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(8){transition-delay:.8s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(9){transition-delay:.9s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(10){transition-delay:1s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(11){transition-delay:1.1s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(12){transition-delay:1.2s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(13){transition-delay:1.3s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(14){transition-delay:1.4s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(15){transition-delay:1.5s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(16){transition-delay:1.6s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(17){transition-delay:1.7s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(18){transition-delay:1.8s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(19){transition-delay:1.9s}.transition__outIn .p-scene-leave-transition .textContent>:nth-child(20){transition-delay:2s}.transition__outIn .p-scene-leave-start .textContent>*{opacity:1;transform:scale(1)}.transition__outIn .p-scene-leave-end .textContent>*{opacity:0;transform:scale(.85)}");const $=t=>new function(t){this.clear=e=>(t.classList.remove(e),this),this.start=e=>(t.classList.add(e,"p-scene-enter-transition","p-scene-enter-start"),setTimeout(()=>{t.classList.add("p-scene-enter-end"),t.classList.remove("p-scene-enter-start")}),this),this.swap=()=>(t.classList.add("p-scene-enter-ended"),this),this.end=e=>(t.classList.remove("p-scene-enter-transition","p-scene-enter-end"),t.classList.add(e,"p-scene-leave-transition","p-scene-leave-start"),setTimeout(()=>{t.classList.add("p-scene-leave-end"),t.classList.remove("p-scene-leave-start")}),this)}(t),S=function(t,c,l){if(this.blocks=[],!t.blocks)return console.warn("No `blocks` array found in scene "+t.index);if(0===t.blocks.length&&console.warn("`blocks` is empty in scene "+t.index),c.modules)for(const e in c.modules)t.hasOwnProperty("modules")||(t.modules={}),t.modules.hasOwnProperty(e)||(t.modules[e]=c.modules[e]);const _=c&&c.transition||t.transition,d=a.props(t.props),p={classes:"",styles:""};if(t.modules)for(const e in t.modules){const o=t.modules[e];if(o.props){const t=a.props(o.props,e);p.classes+=t.classes,p.styles+=t.styles}}let h=0;const f=t.steps||[],y=a.div(`<div \n      class="s ${e} ${d.classes}"\n      style="${d.styles}">\n      <div class="sceneObject ${o}">\n        <div class="${n}">\n            <div class="${i} ${p.classes}" style="${p.styles}">\n                <div class="blocksContainer ${s}"></div>\n                <div class="frontContainer ${r}"></div>\n            </div>\n        </div>\n      </div>\n  </div>`);if(this.el=y,t.modules)for(const e in t.modules){const o=t.modules[e],n=I[e];if(n||console.log(`Module "${e}" not found. Maybe you forgot to include it.`),o&&n){new n(y.querySelector("."+i),o,t,c)}}if(t.blocks.forEach(t=>{const e=y.querySelector(".blocksContainer"),o=new j(e,t,l,c);this.blocks.push(o)}),_){const e=this.el.querySelector(".sceneObject"),o="backward"===t._presentatransdir?"to-left":"to-right";$(e).start(o),setTimeout(()=>{$(e).swap()},c._transitionDestroyDelay)}this.destroyAfter=e=>{if(_){const e=this.el.querySelector(".sceneObject"),o="backward"===t._presentatransdir?"to-right":"to-left",n="backward"===t._presentatransdir?"to-left":"to-right";$(e).clear(o).end(n)}const o=e||0;this.blocks.forEach(t=>t.beforeDestroy()),setTimeout(()=>{this.destroy(),y.parentNode.removeChild(y)},o)},this.stepForward=()=>{if(h<f.length){const t=f[h];this.blocks[t].stepForward(),h++}},this.destroy=()=>{this.blocks.forEach(t=>t.destroy())},this.sceneConfig=t};var L="container_container__3kBNh";t(".container_container__3kBNh{width:100%;height:100%;position:relative;overflow:hidden}.container_container__3kBNh>div{position:absolute;top:0;left:0;width:100%}");var P="style_arrows__1_bDs",T="style_left__1qQXr",F="style_right__1k8ro",q="style_ui__2s5RB",D="style_hide__1NqsM";t(":root{--arrowsOpacity:1;--arrowsVerticalPosition:center;--arrowsHorizontalPosition:space-between;--arrowsPadding:10px}.style_arrows__1_bDs{position:absolute;top:0;left:0;width:100%;height:100%;display:flex;transition:opacity .35s;justify-content:var(--arrowsHorizontalPosition);--arrowsColor:var(--forecolor)}.style_left__1qQXr,.style_right__1k8ro{height:100%;display:flex;align-items:var(--arrowsVerticalPosition);justify-content:center;cursor:pointer;padding:var(--arrowsPadding)}.style_ui__2s5RB{width:20px;height:20px;transition:background-color .3s ease-in-out;width:0;height:0;border-top:10px solid transparent;border-bottom:10px solid transparent;opacity:var(--arrowsOpacity)}.style_left__1qQXr .style_ui__2s5RB{border-right:10px solid var(--arrowsColor)}.style_right__1k8ro .style_ui__2s5RB{border-left:10px solid var(--arrowsColor)}.style_arrows__1_bDs.style_hide__1NqsM{opacity:0}");var E="style_black__3yyT_";t(".style_black__3yyT_{width:100%;height:100%;position:absolute;top:0;left:0;background-color:#000;opacity:0;pointer-events:none;transition:opacity .5s cubic-bezier(.8,.2,.2,.8);z-index:999999}");var B="style_progressbar__1cJNG",O="style_bar__3QMJs";t(":root{--progressbarHeight:5px;--progressbarBottom:initial}.style_progressbar__1cJNG{--progressbarColor:var(--forecolor);width:100%;height:100%;pointer-events:none}.style_bar__3QMJs{width:0;height:var(--progressbarHeight);position:absolute;bottom:var(--progressbarBottom);left:0;background-color:var(--progressbarColor);transition:width .5s cubic-bezier(.8,.2,.2,.8)}");var M="style_pagenum__2FTZD",N="style_content__2wNPr";t(":root{--pagenumTextAlign:right;--pagenumPadding:5px;--pagenumFontSize:10px;--pagenumBackColor:none;--pagenumFont:var(--fontText)}.style_pagenum__2FTZD{--pagenumColor:var(--forecolor);width:100%;height:100%;position:absolute;top:0;left:0;display:flex;align-items:flex-end;pointer-events:none}.style_content__2wNPr{width:100%;text-align:var(--pagenumTextAlign);padding:var(--pagenumPadding);font-size:var(--pagenumFontSize);color:var(--pagenumColor);font-family:var(--pagenumFont);background-color:var(--pagenumBackColor);transition:all .3s ease-in-out}");const R={autoplay:function(t,e,o,n){let i=null;const r=o.delay||4e3;e.on("indexChanged",t=>{(t=>{clearTimeout(i),i=setTimeout(()=>{e.next()},t)})(n.scenes[t.currentIndex].autoplayDuration||r)})},keyboard:function(t,e,o){t.addEventListener("keyup",t=>{"ArrowRight"!==t.key&&"ArrowDown"!==t.key||(e.next(),t.stopPropagation(),t.preventDefault()),"ArrowLeft"!==t.key&&"ArrowUp"!==t.key||(e.prev(),t.stopPropagation(),t.preventDefault())})},arrows:function(t,e,o){let n=null;const i=a.div(`<div class="${P}"></div></div>`),r=a.div(`<div class="${T}"><div class="${q}"></div></div>`);i.appendChild(r);const s=a.div(`<div class="${F}"><div class="${q}"></div>`);i.appendChild(s),t.appendChild(i),r.addEventListener("click",t=>{e.prev(),c()}),s.addEventListener("click",t=>{e.next(),c()}),i.addEventListener("mousemove",t=>{c()}),e.on("indexChanged",t=>{r.style.visibility="visible",s.style.visibility="visible",t.isFirst&&(r.style.visibility="hidden"),t.isLast&&(s.style.visibility="hidden")});const c=()=>{clearTimeout(n),i.classList.remove(D),n=setTimeout(()=>{},1500)};c()},black:function(t,e,o,n){let i=!1;const r=a.div(`<div class="${E}"></div>`);t.appendChild(r);const s=o.key||"b";t.addEventListener("keyup",t=>{t.key===s&&(i=!i,r.style.opacity=i?1:0,t.stopPropagation(),t.preventDefault())})},fullscreen:function(t,e,o,n){const i=o.key||"f",r=t.parentNode;t.addEventListener("keyup",t=>{var e;t.key===i&&(document.fullscreenElement||document.webkitFullscreenElement||document.mozFullScreenElement||document.msFullscreenElement?document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen?document.webkitExitFullscreen():document.msExitFullscreen&&document.msExitFullscreen():(e=r).requestFullscreen?e.requestFullscreen():e.mozRequestFullScreen?e.mozRequestFullScreen():e.webkitRequestFullscreen?e.webkitRequestFullscreen(Element.ALLOW_KEYBOARD_INPUT):e.msRequestFullscreen&&e.msRequestFullscreen(),t.stopPropagation(),t.preventDefault())})},focus:function(t,e,o,n){new IntersectionObserver((e,o)=>{e.forEach(e=>{e.isIntersecting&&t.focus({preventScroll:!0})})}).observe(t)},preload:function(t,e,o,n){n.scenes.forEach(t=>{t.blocks.forEach(t=>{"image"!==t.type&&"video"!==t.type||((t,e)=>{const o=document.createElement("link");o.href=t,o.rel="preload",o.as=e,document.head.appendChild(o)})(t.url,t.type)})})},progressbar:function(t,e,o,n){const i=a.div(`<div class="${B}"></div>`),r=a.div(`<div class="${O}"></div>`);i.appendChild(r),t.appendChild(i);const s=n.scenes.length;e.on("indexChanged",t=>{(t=>{const e=(t.currentIndex+1)/s*100;r.style.width=e+"%"})(t)})},pagenum:function(t,e,o,n){const i=a.div(`<div class="${M}"></div>`),r=a.div(`<div class="${N}"></div>`);i.appendChild(r),t.appendChild(i);const s=o.template||"%s / %S",c=n.scenes.length;e.on("indexChanged",t=>{(t=>{const e=t.currentIndex+1,o=s.replace(/%s/gm,e).replace(/%S/gm,c);r.innerHTML=o})(t)})},shuffle:function(t,e,o,n){(t=>{for(let e=t.length-1;e>0;e--){const o=Math.floor(Math.random()*(e+1));[t[e],t[o]]=[t[o],t[e]]}})(n.scenes)},loop:function(t,e,o,n){e.on("end",t=>{e.goto(0),e.notify("nextIndex")})}};var A="router_router__2R2qw";t(".router_router__2R2qw{width:100%;height:100%;position:absolute;top:0;left:0}");const X=function(t,e){const o=a.props(e.controllers.props),n=a.div(`<div style="${o.styles}" class="controller ${A} ${o.classes}"></div>`);t.appendChild(n),n.setAttribute("tabindex","0");const i=e.scenes,r=i.length-1,s={},c={};let l=0,_=0,d=0;const p=()=>{d=i[l]&&i[l].steps?i[l].steps.length:0};if(p(),this.next=()=>{_===d?this.nextIndex():(_++,this.notify("stepChanged"))},this.prev=()=>{this.prevIndex()},this.nextIndex=()=>{l<r?(l++,_=0,p(),this.notify("nextIndex"),this.notify("indexChanged")):(l=r,_=0,this.notify("end"))},this.prevIndex=()=>{l>0?(l--,_=0,p(),this.notify("prevIndex"),this.notify("indexChanged")):(l=0,_=0,this.notify("begin"))},this.goto=t=>{l=t<r?t:r,_=0,this.notify("nextIndex"),this.notify("indexChanged")},this.notify=t=>{const e=i[l],c=a.props(e.props);if(n.classList.remove(...n.classList),n.classList.add("controller",A),c.classes){let t=c.classes.split(" ");t=t.filter(t=>""!==t),n.classList.add(...t)}if(o.classes){let t=o.classes.split(" ");t=t.filter(t=>""!==t),n.classList.add(...t)}s[t]&&s[t].forEach(t=>{t({currentIndex:l,currentStep:_,totalScenes:this.totalScenes(),isFirst:0===l,isLast:l===r})})},this.on=(t,e)=>{s[t]||(s[t]=[]),s[t].push(e)},this.off=(t,e)=>{const o=s[t].indexOf(e);o>=0&&s[t].splice(o,1)},this.totalScenes=()=>r+1,this.totalSteps=()=>d,this.currentIndex=()=>l,this.currentStep=()=>_,e.controllers)for(const t in e.controllers)if("props"!==t){const o=e.controllers[t],i=R[t];i||console.log(`Controller "${t}" not found. Maybe you forgot to include it.`),o&&i&&(c[t]=new i(n,this,o,e))}this.notify("indexChanged")},J=function(t,e){this.config=e;const o=getComputedStyle(t);let n=+o.width.split("px")[0],i=+o.height.split("px")[0];if(n<=0&&(n=360,t.style.width=n+"px"),i<=0&&(i=200,e.aspect&&(i=n/e.aspect),t.style.height=i+"px"),!e.scenes)return console.warn("No `scenes` array found");0===e.scenes.length&&console.warn("`scenes` is empty");["transition","colorvar","scheme","fontkit","theme"].forEach(o=>{if(e[o]){const n=e[o].substr(1);t.classList.add(`${o}__${n}`)}}),t.classList.add("presenta");const r=a.div(`<div class="a ${L}"></div>`),s=e.scenes;var c=null;t.appendChild(r);const l=(o,n)=>{c&&(c.sceneConfig._presentatransdir=n,c.destroyAfter(e._transitionDestroyDelay));const i=s[o];i._presentatransdir=n,c=new S(i,e,t),r.appendChild(c.el)};if(this.router=new X(t,e),this.router.on("nextIndex",t=>{l(t.currentIndex,"foreward")}),this.router.on("prevIndex",t=>{l(t.currentIndex,"backward")}),this.router.on("stepChanged",t=>{c.stepForward()}),window.ResizeObserver){new ResizeObserver(o=>{a.fit(r,e,t)}).observe(r)}a.fit(r,e,t),l(0,"foreward"),this.currentScene=()=>c,this.destroy=()=>{c.destroy()}};const W=function(t,e){return(t=>{const e={aspect:1.6,adapt:!0,mode:"present",controllers:{keyboard:!0,arrows:!0,black:!0,fullscreen:!0},modules:{},scheme:null,fontkit:null,transition:null,colorvar:null,_transitionDestroyDelay:1e3};for(const o in e)if(t.hasOwnProperty(o)){if("object"==typeof e[o])for(const n in e[o])t[o]&&!t[o].hasOwnProperty(n)&&(t[o][n]=e[o][n])}else t[o]=e[o]})(e),new J(a.select(t),e)};return W.version="0.0.26",W.utils=a,W.schemes=["original","vibrant","polite","breeze","sunny","acid","novel","doub","mayb"],W.Scene=S,W.addBlock=(t,e,o)=>{if(z[t])return console.warn(`block type ${t} already defined`);o&&z[t]&&console.warn(`block type ${t} was overriden`),z[t]=e},W.addController=(t,e,o)=>{if(R[t])return console.warn(`controller io ${t} already defined`);o&&R[t]&&console.warn(`controller type ${t} was overriden`),R[t]=e},W.addModule=(t,e,o)=>{if(!o&&I[t])return console.warn(`module type ${t} already defined`);o&&I[t]&&console.warn(`module type ${t} was overriden`),I[t]=e},W.use=t=>{t.install(W)},W}));
